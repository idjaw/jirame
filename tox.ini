[tox]
envlist = {py37,py38,py39,py310}-{lint,test},report
skipsdist = true

[testenv]
skip_install = true
deps =
    -r{toxinidir}/requirements-dev.txt

[testenv:lint]
skip_install = true
commands=
        isort . -c --diff
        pylint --disable=C,R,W jirame
        flake8 --statistics --show-source jirame
        mypy jirame --ignore-missing-imports
        black . --diff --check

[testenv:test]
commands = pytest --cov=jirame --cov-append --cov-report=term-missing

[testenv:report]
skip_install = true
commands =
    coverage report
    coverage html

[testenv:clean]
skip_install = true
commands = coverage erase
